<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Untitled Document</title>
	<style>
		section {
			position: relative;
		}
		article {
			position: absolute;
			background: white;
			border: 3px solid black;
		}
		span {
			background: #0AF500;
			display: block;
			width: 50px;
			height: 50px;
			border-radius: 25px;
			position: absolute;
		}
	</style>
</head>

<body>
<section>
  <img src="original.jpg" alt="" usemap="#Navigation">
	<map name="Navigation">
		<area shape="poly" coords="578,667,609,707,717,624,689,585" href="#" alt="Информация" id="1" data-left="690px" data-bottom="885px">
		<area shape="poly" coords="887,962,919,982,1025,893,942,873" href="#" alt="Информация" id="2" data-left="1025px" data-bottom="582px">
		<area shape="poly" coords="977,424,1038,597,1060,605,1085,595,1051,393" href="#" alt="Информация" id="3" data-left="1051px" data-bottom="1083px">
		<area shape="poly" coords="1033,644,1053,702,1052,754,990,735,911,705,921,622" href="#" alt="Информация" id="4" data-left="1033px" data-bottom="826px">
		<area shape="poly" coords="487,536,504,606,507,558,517,530,500,506,437,488" href="#" alt="Информация" id="5" data-left="500px" data-bottom="964px">
		<area shape="poly" coords="594,1077,531,1110,535,1013,562,1000" href="#" alt="Информация" id="6" data-left="562px" data-bottom="470px">
		<area shape="poly" coords="636,1052,601,1071,570,996,602,985" href="#" alt="Информация" id="7" data-left="602px" data-bottom="485px">
		<area shape="poly" coords="675,855,627,889,603,852,646,819" href="#" alt="Информация" id="8" data-left="646px" data-bottom="651px">
		<area shape="poly" coords="1361,1136,1274,1114,1274,1084,1368,1107" href="#" alt="Информация" id="9" data-left="1274px" data-bottom="390px">
	</map>
	<article data-name="1" hidden>
	  <h1>Зимний Дворей</h1>
  </article>
	<article data-name="2" hidden>
	  <h1>Госинный двор</h1>
	</article>
  <article data-name="3" hidden>
	  <h1>Летний сад</h1>
  </article>
  <article data-name="4" hidden>
	  <h1>Михайловский сад</h1>
  </article>
  <article data-name="5" hidden>
	  <h1>Стрелка Васильевского острова</h1>
  </article>
  <article data-name="6" hidden>
	  <h1>Мариинский дворец</h1>
  </article>
  <article data-name="7" hidden>
	  <h1>Усадьба Демидова</h1>
  </article>
  <article data-name="8" hidden>
	  <h1>Дом пиковой Дамы</h1>
  </article>
  <article data-name="9" hidden>
	  <h1>Дом из русской сказки</h1>
  </article>
</section>
	<script>
		let section = document.getElementsByTagName("section")[0];
		let articles = document.getElementsByTagName("article");
		let spans = [];
		let areas = document.getElementsByTagName('area');
		
		window.onload = function(){
		for (let i = 0; i < areas.length; i++) {
			spans[i] = document.createElement("span");
			spans[i].setAttribute("data-area", areas[i].id);
		};
		
		for (let i = 0; i < areas.length; i++) {
				section.appendChild(spans[i]);
				
				let coord = areas[i].getAttribute("coords");
				let coordAll = coord.split(",");
				let coordX = [], coordY = [], xAll = 0, yAll = 0, numX, numY,size;
				
				for (let j = 0; j < coordAll.length; j++) {
					if (j % 2 == 0) {
						coordX.push(coordAll[j]);
						xAll = xAll + (+coordAll[j]);
					} else {
						coordY.push(coordAll[j]);
						yAll = yAll + (+coordAll[j]);
					}
					
				}
				
				numX=xAll/coordX.length;
				numY=yAll/coordY.length;
				//size=(xAll+yAll)/(coordX.length + coordY.length);
				
				let syleSpan = getComputedStyle(spans[i]);
				let width = parseInt(syleSpan.width);
				let height = parseInt(syleSpan.height);
				
				spans[i].style.left = numX - width/2 + "px";
				spans[i].style.top = numY - height/2 + "px";
			}
		}
		//alert(spans.length);
		section.onclick = function (event) {
			let element = event.target;
			
			let selector = "[data-name='" + element.id + "']";
			let art = document.querySelector(selector);
			
			if(element.tagName == "ARTICLE" || element.parentNode.tagName == "ARTICLE"){
				return;
			}
			
			
			
			for (let i = 0; i < articles.length; i++) {
				articles[i].hidden = true;
			}
			
			if (element.tagName == "AREA") {
				art.hidden = false;
				art.style.left = element.getAttribute("data-left");
				art.style.bottom = element.getAttribute("data-bottom");
			}
			
			
				
				//spans[i].style.borderRadius=
				
				//spans[i].style.left = areas[i].getAttribute("data-left") - 25 + "px";
				//spans[i].style.bottom = areas[i].getAttribute("data-bottom") - 25 + "px";
			
		}
	</script>
	
</body>
</html>